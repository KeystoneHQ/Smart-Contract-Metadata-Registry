{"name": "PerpetualFutures", "chainId": 1, "address": "0x92dE1ba0C5f12E8B56597fF11b3Be959517B1Cd6", "metadata": {"output": {"abi": [{"inputs": [{"internalType": "string", "name": "_tokenURI", "type": "string"}], "stateMutability": "nonpayable", "type": "constructor"}, {"anonymous": false, "inputs": [{"indexed": true, "internalType": "uint256", "name": "tokenId", "type": "uint256"}, {"indexed": true, "internalType": "address", "name": "user", "type": "address"}, {"indexed": false, "internalType": "uint256", "name": "indexPriceStart", "type": "uint256"}, {"indexed": false, "internalType": "uint256", "name": "indexPriceSettle", "type": "uint256"}, {"indexed": false, "internalType": "uint256", "name": "amountWon", "type": "uint256"}, {"indexed": false, "internalType": "uint256", "name": "amountLost", "type": "uint256"}], "name": "ClosePosition", "type": "event"}, {"anonymous": false, "inputs": [{"indexed": false, "internalType": "uint256", "name": "tokenId", "type": "uint256"}], "name": "ClosePositionFromTriggerOrder", "type": "event"}, {"anonymous": false, "inputs": [{"indexed": true, "internalType": "uint256", "name": "tokenId", "type": "uint256"}], "name": "CloseUnsettledPosition", "type": "event"}, {"anonymous": false, "inputs": [{"indexed": false, "internalType": "uint256", "name": "tokenId", "type": "uint256"}], "name": "LiquidatePosition", "type": "event"}, {"anonymous": false, "inputs": [{"indexed": true, "internalType": "uint256", "name": "tokenId", "type": "uint256"}, {"indexed": true, "internalType": "address", "name": "user", "type": "address"}, {"indexed": false, "internalType": "uint256", "name": "indexPriceStart", "type": "uint256"}, {"indexed": false, "internalType": "uint256", "name": "positionCollateral", "type": "uint256"}, {"indexed": false, "internalType": "bool", "name": "isLong", "type": "bool"}, {"indexed": false, "internalType": "uint256", "name": "leverage", "type": "uint256"}], "name": "OpenPosition", "type": "event"}, {"anonymous": false, "inputs": [{"indexed": true, "internalType": "address", "name": "previousOwner", "type": "address"}, {"indexed": true, "internalType": "address", "name": "newOwner", "type": "address"}], "name": "OwnershipTransferred", "type": "event"}, {"anonymous": false, "inputs": [{"indexed": false, "internalType": "uint256", "name": "tokenId", "type": "uint256"}, {"indexed": false, "internalType": "uint256", "name": "mainTokenSettleAmt", "type": "uint256"}, {"indexed": false, "internalType": "uint256", "name": "collSettlePrice", "type": "uint256"}, {"indexed": false, "internalType": "uint256", "name": "mainSettlePrice", "type": "uint256"}], "name": "SettlePosition", "type": "event"}, {"inputs": [{"internalType": "string", "name": "_name", "type": "string"}, {"internalType": "address[]", "name": "_proxies", "type": "address[]"}, {"internalType": "uint16[]", "name": "_weights", "type": "uint16[]"}], "name": "addIndex", "outputs": [], "stateMutability": "nonpayable", "type": "function"}, {"inputs": [{"internalType": "uint256", "name": "_tokenId", "type": "uint256"}, {"internalType": "uint256", "name": "_idxPriceTarget", "type": "uint256"}], "name": "addTriggerOrder", "outputs": [], "stateMutability": "nonpayable", "type": "function"}, {"inputs": [{"internalType": "uint256", "name": "", "type": "uint256"}], "name": "allOpenPositions", "outputs": [{"internalType": "uint256", "name": "", "type": "uint256"}], "stateMutability": "view", "type": "function"}, {"inputs": [{"internalType": "uint256", "name": "", "type": "uint256"}], "name": "allUnsettledPositions", "outputs": [{"internalType": "uint256", "name": "", "type": "uint256"}], "stateMutability": "view", "type": "function"}, {"inputs": [{"internalType": "address", "name": "", "type": "address"}], "name": "amtOpenLong", "outputs": [{"internalType": "uint256", "name": "", "type": "uint256"}], "stateMutability": "view", "type": "function"}, {"inputs": [{"internalType": "address", "name": "", "type": "address"}], "name": "amtOpenShort", "outputs": [{"internalType": "uint256", "name": "", "type": "uint256"}], "stateMutability": "view", "type": "function"}, {"inputs": [{"internalType": "uint256", "name": "_ind", "type": "uint256"}, {"internalType": "uint256", "name": "_timestamp", "type": "uint256"}], "name": "canOpenPositionAgainstIndex", "outputs": [{"internalType": "bool", "name": "", "type": "bool"}], "stateMutability": "view", "type": "function"}, {"inputs": [{"internalType": "bytes", "name": "", "type": "bytes"}], "name": "checkUpkeep", "outputs": [{"internalType": "bool", "name": "upkeepNeeded", "type": "bool"}, {"internalType": "bytes", "name": "", "type": "bytes"}], "stateMutability": "view", "type": "function"}, {"inputs": [], "name": "closeFeePerDuration", "outputs": [{"internalType": "uint256", "name": "", "type": "uint256"}], "stateMutability": "view", "type": "function"}, {"inputs": [], "name": "closeFeePerDurationUnit", "outputs": [{"internalType": "uint256", "name": "", "type": "uint256"}], "stateMutability": "view", "type": "function"}, {"inputs": [], "name": "closeFeePositionSize", "outputs": [{"internalType": "uint256", "name": "", "type": "uint256"}], "stateMutability": "view", "type": "function"}, {"inputs": [{"internalType": "uint256", "name": "_tokenId", "type": "uint256"}], "name": "closePosition", "outputs": [], "stateMutability": "nonpayable", "type": "function"}, {"inputs": [], "name": "enabled", "outputs": [{"internalType": "bool", "name": "", "type": "bool"}], "stateMutability": "view", "type": "function"}, {"inputs": [], "name": "getAllIndexes", "outputs": [{"components": [{"internalType": "string", "name": "name", "type": "string"}, {"internalType": "uint256", "name": "weightsTotal", "type": "uint256"}, {"internalType": "uint256", "name": "dowOpenMin", "type": "uint256"}, {"internalType": "uint256", "name": "dowOpenMax", "type": "uint256"}, {"internalType": "uint256", "name": "hourOpenMin", "type": "uint256"}, {"internalType": "uint256", "name": "hourOpenMax", "type": "uint256"}, {"components": [{"internalType": "address", "name": "proxy", "type": "address"}, {"internalType": "uint16", "name": "weight", "type": "uint16"}, {"internalType": "uint256", "name": "priceWeightMult", "type": "uint256"}], "internalType": "struct IndexHandler.IndexFeed[]", "name": "priceFeeds", "type": "tuple[]"}], "internalType": "struct IndexHandler.Index[]", "name": "", "type": "tuple[]"}], "stateMutability": "view", "type": "function"}, {"inputs": [{"internalType": "uint256", "name": "_tokenId", "type": "uint256"}], "name": "getAllPositionTriggerOrders", "outputs": [{"components": [{"internalType": "uint256", "name": "idxPriceCurrent", "type": "uint256"}, {"internalType": "uint256", "name": "idxPriceTarget", "type": "uint256"}], "internalType": "struct PerpetualFutures.TriggerOrder[]", "name": "", "type": "tuple[]"}], "stateMutability": "view", "type": "function"}, {"inputs": [], "name": "getAllUnsettledPositions", "outputs": [{"internalType": "uint256[]", "name": "", "type": "uint256[]"}], "stateMutability": "view", "type": "function"}, {"inputs": [], "name": "getAllValidCollateralTokens", "outputs": [{"internalType": "address[]", "name": "", "type": "address[]"}], "stateMutability": "view", "type": "function"}, {"inputs": [{"internalType": "uint256", "name": "_tokenId", "type": "uint256"}], "name": "getIndexAndPLInfo", "outputs": [{"internalType": "uint256", "name": "", "type": "uint256"}, {"internalType": "uint256", "name": "", "type": "uint256"}, {"internalType": "uint256", "name": "", "type": "uint256"}, {"internalType": "bool", "name": "", "type": "bool"}, {"internalType": "bool", "name": "", "type": "bool"}], "stateMutability": "view", "type": "function"}, {"inputs": [{"internalType": "address[]", "name": "_proxies", "type": "address[]"}, {"internalType": "uint256[]", "name": "_multipliers", "type": "uint256[]"}], "name": "getIndexPriceFromFeeds", "outputs": [{"internalType": "uint256", "name": "", "type": "uint256"}], "stateMutability": "view", "type": "function"}, {"inputs": [{"internalType": "uint256", "name": "_index", "type": "uint256"}], "name": "getIndexPriceFromIndex", "outputs": [{"internalType": "uint256", "name": "", "type": "uint256"}], "stateMutability": "view", "type": "function"}, {"inputs": [{"internalType": "address", "name": "_proxy", "type": "address"}], "name": "getLatestProxyInfo", "outputs": [{"internalType": "uint16", "name": "", "type": "uint16"}, {"internalType": "uint80", "name": "", "type": "uint80"}, {"internalType": "uint256", "name": "", "type": "uint256"}], "stateMutability": "view", "type": "function"}, {"inputs": [{"internalType": "uint256", "name": "_tokenId", "type": "uint256"}], "name": "getLiquidationPriceChange", "outputs": [{"internalType": "uint256", "name": "", "type": "uint256"}], "stateMutability": "view", "type": "function"}, {"inputs": [], "name": "getPerpsNFT", "outputs": [{"internalType": "address", "name": "", "type": "address"}], "stateMutability": "view", "type": "function"}, {"inputs": [{"internalType": "uint256", "name": "_tokenId", "type": "uint256"}], "name": "getPositionCloseFees", "outputs": [{"internalType": "uint256", "name": "", "type": "uint256"}, {"internalType": "uint256", "name": "", "type": "uint256"}], "stateMutability": "view", "type": "function"}, {"inputs": [{"internalType": "uint256", "name": "_tokenId", "type": "uint256"}], "name": "getPositionIndexPrice", "outputs": [{"internalType": "uint256", "name": "", "type": "uint256"}], "stateMutability": "view", "type": "function"}, {"inputs": [{"internalType": "uint256", "name": "_tokenId", "type": "uint256"}], "name": "getPositionIndexProxies", "outputs": [{"internalType": "address[]", "name": "", "type": "address[]"}], "stateMutability": "view", "type": "function"}, {"inputs": [{"internalType": "uint256", "name": "", "type": "uint256"}], "name": "indexes", "outputs": [{"internalType": "string", "name": "name", "type": "string"}, {"internalType": "uint256", "name": "weightsTotal", "type": "uint256"}, {"internalType": "uint256", "name": "dowOpenMin", "type": "uint256"}, {"internalType": "uint256", "name": "dowOpenMax", "type": "uint256"}, {"internalType": "uint256", "name": "hourOpenMin", "type": "uint256"}, {"internalType": "uint256", "name": "hourOpenMax", "type": "uint256"}], "stateMutability": "view", "type": "function"}, {"inputs": [], "name": "mainCollateralToken", "outputs": [{"internalType": "address", "name": "", "type": "address"}], "stateMutability": "view", "type": "function"}, {"inputs": [{"internalType": "address", "name": "", "type": "address"}], "name": "maxCollateralOpenDiff", "outputs": [{"internalType": "uint256", "name": "", "type": "uint256"}], "stateMutability": "view", "type": "function"}, {"inputs": [], "name": "maxLeverage", "outputs": [{"internalType": "uint16", "name": "", "type": "uint16"}], "stateMutability": "view", "type": "function"}, {"inputs": [], "name": "maxTriggerOrders", "outputs": [{"internalType": "uint8", "name": "", "type": "uint8"}], "stateMutability": "view", "type": "function"}, {"inputs": [], "name": "minOpenTimeForProfit", "outputs": [{"internalType": "uint256", "name": "", "type": "uint256"}], "stateMutability": "view", "type": "function"}, {"inputs": [], "name": "minPriceDiffForProfit", "outputs": [{"internalType": "uint256", "name": "", "type": "uint256"}], "stateMutability": "view", "type": "function"}, {"inputs": [], "name": "openFeePositionSize", "outputs": [{"internalType": "uint256", "name": "", "type": "uint256"}], "stateMutability": "view", "type": "function"}, {"inputs": [{"internalType": "address", "name": "_collToken", "type": "address"}, {"internalType": "uint256", "name": "_indexInd", "type": "uint256"}, {"internalType": "uint256", "name": "_collateral", "type": "uint256"}, {"internalType": "uint16", "name": "_leverage", "type": "uint16"}, {"internalType": "bool", "name": "_isLong", "type": "bool"}, {"internalType": "uint256", "name": "_triggerOrderTargetPrice", "type": "uint256"}], "name": "openPosition", "outputs": [], "stateMutability": "nonpayable", "type": "function"}, {"inputs": [], "name": "owner", "outputs": [{"internalType": "address", "name": "", "type": "address"}], "stateMutability": "view", "type": "function"}, {"inputs": [{"internalType": "bytes", "name": "", "type": "bytes"}], "name": "performUpkeep", "outputs": [], "stateMutability": "nonpayable", "type": "function"}, {"inputs": [{"internalType": "uint256", "name": "", "type": "uint256"}], "name": "positionClosers", "outputs": [{"internalType": "address", "name": "", "type": "address"}], "stateMutability": "view", "type": "function"}, {"inputs": [{"internalType": "uint256", "name": "", "type": "uint256"}], "name": "positionOpeners", "outputs": [{"internalType": "address", "name": "", "type": "address"}], "stateMutability": "view", "type": "function"}, {"inputs": [{"internalType": "uint256", "name": "", "type": "uint256"}, {"internalType": "uint256", "name": "", "type": "uint256"}], "name": "positionTriggerOrders", "outputs": [{"internalType": "uint256", "name": "idxPriceCurrent", "type": "uint256"}, {"internalType": "uint256", "name": "idxPriceTarget", "type": "uint256"}], "stateMutability": "view", "type": "function"}, {"inputs": [{"internalType": "uint256", "name": "", "type": "uint256"}], "name": "positions", "outputs": [{"components": [{"internalType": "uint256", "name": "openTime", "type": "uint256"}, {"internalType": "uint256", "name": "openFees", "type": "uint256"}, {"internalType": "uint256", "name": "closeTime", "type": "uint256"}, {"internalType": "uint256", "name": "closeFees", "type": "uint256"}, {"internalType": "uint256", "name": "settleCollPriceUSD", "type": "uint256"}, {"internalType": "uint256", "name": "settleMainPriceUSD", "type": "uint256"}], "internalType": "struct PerpetualFutures.PositionLifecycle", "name": "lifecycle", "type": "tuple"}, {"internalType": "address", "name": "collateralToken", "type": "address"}, {"internalType": "uint256", "name": "collateralCloseUnsettled", "type": "uint256"}, {"internalType": "uint256", "name": "collateralAmount", "type": "uint256"}, {"internalType": "uint256", "name": "positionAmount", "type": "uint256"}, {"internalType": "bool", "name": "isLong", "type": "bool"}, {"internalType": "uint16", "name": "leverage", "type": "uint16"}, {"internalType": "uint256", "name": "indexPriceStart", "type": "uint256"}, {"internalType": "uint256", "name": "indexPriceSettle", "type": "uint256"}, {"internalType": "uint256", "name": "amountWon", "type": "uint256"}, {"internalType": "uint256", "name": "amountLost", "type": "uint256"}, {"internalType": "bool", "name": "isSettled", "type": "bool"}], "stateMutability": "view", "type": "function"}, {"inputs": [{"internalType": "uint256", "name": "_amount", "type": "uint256"}], "name": "processFees", "outputs": [], "stateMutability": "nonpayable", "type": "function"}, {"inputs": [{"internalType": "uint256", "name": "_indexIdx", "type": "uint256"}], "name": "refreshIndexFeedWeights", "outputs": [], "stateMutability": "nonpayable", "type": "function"}, {"inputs": [{"internalType": "uint256", "name": "_index", "type": "uint256"}], "name": "removeIndex", "outputs": [], "stateMutability": "nonpayable", "type": "function"}, {"inputs": [{"internalType": "uint256", "name": "_tokenId", "type": "uint256"}, {"internalType": "uint256", "name": "_idx", "type": "uint256"}], "name": "removeTriggerOrder", "outputs": [], "stateMutability": "nonpayable", "type": "function"}, {"inputs": [], "name": "renounceOwnership", "outputs": [], "stateMutability": "nonpayable", "type": "function"}, {"inputs": [{"internalType": "uint256", "name": "_percentage", "type": "uint256"}], "name": "setClosePositionFeePerDuration", "outputs": [], "stateMutability": "nonpayable", "type": "function"}, {"inputs": [{"internalType": "uint256", "name": "_seconds", "type": "uint256"}], "name": "setClosePositionFeePerDurationUnit", "outputs": [], "stateMutability": "nonpayable", "type": "function"}, {"inputs": [{"internalType": "uint256", "name": "_percentage", "type": "uint256"}], "name": "setClosePositionFeePositionSize", "outputs": [], "stateMutability": "nonpayable", "type": "function"}, {"inputs": [{"internalType": "bool", "name": "_enabled", "type": "bool"}], "name": "setEnabled", "outputs": [], "stateMutability": "nonpayable", "type": "function"}, {"inputs": [{"internalType": "address", "name": "_reducer", "type": "address"}], "name": "setFeeReducer", "outputs": [], "stateMutability": "nonpayable", "type": "function"}, {"inputs": [{"internalType": "address", "name": "_token", "type": "address"}], "name": "setMainCollateralToken", "outputs": [], "stateMutability": "nonpayable", "type": "function"}, {"inputs": [{"internalType": "address", "name": "_collateral", "type": "address"}, {"internalType": "uint256", "name": "_amount", "type": "uint256"}], "name": "setMaxCollateralOpenDiff", "outputs": [], "stateMutability": "nonpayable", "type": "function"}, {"inputs": [{"internalType": "uint16", "name": "_max", "type": "uint16"}], "name": "setMaxLeverage", "outputs": [], "stateMutability": "nonpayable", "type": "function"}, {"inputs": [{"internalType": "uint8", "name": "_max", "type": "uint8"}], "name": "setMaxLiquidationsPerUpkeep", "outputs": [], "stateMutability": "nonpayable", "type": "function"}, {"inputs": [{"internalType": "uint8", "name": "_max", "type": "uint8"}], "name": "setMaxTriggerOrders", "outputs": [], "stateMutability": "nonpayable", "type": "function"}, {"inputs": [{"internalType": "uint256", "name": "_seconds", "type": "uint256"}], "name": "setMinOpenTimeForProfit", "outputs": [], "stateMutability": "nonpayable", "type": "function"}, {"inputs": [{"internalType": "uint256", "name": "_percentage", "type": "uint256"}], "name": "setMinPriceDiffForProfit", "outputs": [], "stateMutability": "nonpayable", "type": "function"}, {"inputs": [{"internalType": "uint256", "name": "_percentage", "type": "uint256"}], "name": "setOpenPositionFeePositionSize", "outputs": [], "stateMutability": "nonpayable", "type": "function"}, {"inputs": [{"internalType": "address", "name": "_wallet", "type": "address"}, {"internalType": "bool", "name": "_isSettler", "type": "bool"}], "name": "setSettler", "outputs": [], "stateMutability": "nonpayable", "type": "function"}, {"inputs": [{"internalType": "address", "name": "_token", "type": "address"}, {"internalType": "bool", "name": "_isValid", "type": "bool"}], "name": "setValidCollateralToken", "outputs": [], "stateMutability": "nonpayable", "type": "function"}, {"inputs": [{"internalType": "uint256", "name": "_tokenId", "type": "uint256"}, {"internalType": "uint256", "name": "_collPriceUSD", "type": "uint256"}, {"internalType": "uint256", "name": "_mainPriceUSD", "type": "uint256"}], "name": "settleUnsettledPosition", "outputs": [], "stateMutability": "nonpayable", "type": "function"}, {"inputs": [{"internalType": "address", "name": "", "type": "address"}], "name": "settlers", "outputs": [{"internalType": "bool", "name": "", "type": "bool"}], "stateMutability": "view", "type": "function"}, {"inputs": [{"internalType": "uint256", "name": "_tokenId", "type": "uint256"}], "name": "shouldPositionCloseFromTrigger", "outputs": [{"internalType": "bool", "name": "", "type": "bool"}], "stateMutability": "view", "type": "function"}, {"inputs": [{"internalType": "uint256", "name": "_tokenId", "type": "uint256"}], "name": "shouldPositionLiquidate", "outputs": [{"internalType": "bool", "name": "", "type": "bool"}], "stateMutability": "view", "type": "function"}, {"inputs": [], "name": "totalAmountLoss", "outputs": [{"internalType": "uint256", "name": "", "type": "uint256"}], "stateMutability": "view", "type": "function"}, {"inputs": [], "name": "totalAmountProfit", "outputs": [{"internalType": "uint256", "name": "", "type": "uint256"}], "stateMutability": "view", "type": "function"}, {"inputs": [], "name": "totalFees", "outputs": [{"internalType": "uint256", "name": "", "type": "uint256"}], "stateMutability": "view", "type": "function"}, {"inputs": [{"internalType": "address", "name": "newOwner", "type": "address"}], "name": "transferOwnership", "outputs": [], "stateMutability": "nonpayable", "type": "function"}, {"inputs": [{"internalType": "uint256", "name": "_indexInd", "type": "uint256"}, {"internalType": "uint256", "name": "_dowOpenMin", "type": "uint256"}, {"internalType": "uint256", "name": "_dowOpenMax", "type": "uint256"}, {"internalType": "uint256", "name": "_hourOpenMin", "type": "uint256"}, {"internalType": "uint256", "name": "_hourOpenMax", "type": "uint256"}], "name": "updateIndexOpenTimeBounds", "outputs": [], "stateMutability": "nonpayable", "type": "function"}, {"inputs": [{"internalType": "uint256", "name": "_tokenId", "type": "uint256"}, {"internalType": "uint256", "name": "_idx", "type": "uint256"}, {"internalType": "uint256", "name": "_idxPriceTarget", "type": "uint256"}], "name": "updateTriggerOrder", "outputs": [], "stateMutability": "nonpayable", "type": "function"}, {"inputs": [{"internalType": "address", "name": "_token", "type": "address"}, {"internalType": "uint256", "name": "_amount", "type": "uint256"}], "name": "withdrawERC20", "outputs": [], "stateMutability": "nonpayable", "type": "function"}]}}, "version": 1, "checkPoints": [], "isProxy": false, "principalAddress": null}